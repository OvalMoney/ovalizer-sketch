{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/commands/lint.js","webpack://exports/./src/lib/artboards/autoalign.js","webpack://exports/./src/lib/artboards/check-artboards.js","webpack://exports/./src/lib/artboards/fix-title.js","webpack://exports/./src/lib/artboards/rows-by-position.js","webpack://exports/./src/lib/pages/index.js","webpack://exports/external \"sketch/ui\""],"names":["validateAndFix","context","getPages","itPage","enPage","UI","message","autoalign","fixTitle","checkArtboards","page","rows","rowsByPosition","rowNames","Object","keys","sort","a","b","parseInt","y","rowName","row","x","nextYOffset","sequenceNumber","artboard","parent","parentGroup","removeFromParent","insertLayer_atIndex","artboardNumber","name","toString","absoluteRect","rulerX","rulerY","height","frame","getArtboards","map","filterArtboards","artboardToFilter","invalidArtboards","filter","find","invalid","checkArtoboards","pageIt","pageEn","rowsIt","rowsEn","artboardsIt","artboardsEn","length","isEnInvalid","innerArtboardsIt","reduce","acc","artboardGroup","concat","innerArtboardsEn","missingArtboards","missingArtboardsNames","invalidPage","placeholder","layers","forEach","item","String","setStringValue","artboards","rowCovers","number","index","yPositions","entries","i","includes","yPos","closestRow","smallestDist","Infinity","rowYPos","yDist","Math","abs","push","values","pages","document"],"mappings":"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","file":"lint.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/commands/lint.js\");\n","/* eslint-disable-next-line import/no-unresolved */\nimport UI from 'sketch/ui';\n\nimport {getPages} from '../lib/pages';\nimport autoalign from '../lib/artboards/autoalign';\nimport fixTitle from '../lib/artboards/fix-title';\nimport checkArtboards from '../lib/artboards/check-artboards';\n\nexport default function validateAndFix(context) {\n\tconst {itPage, enPage} = getPages(context);\n\n\tif (!itPage && !enPage) {\n\t\tUI.message('⚠️ Missing ITA or ENG page');\n\t\treturn;\n\t}\n\n\tif (itPage) {\n\t\tautoalign(itPage);\n\t\tfixTitle(itPage);\n\t}\n\n\tif (enPage) {\n\t\tautoalign(enPage);\n\t\tfixTitle(enPage);\n\t}\n\n\tif (itPage && enPage) {\n\t\tconst {message} = checkArtboards(itPage, enPage);\n\t\tUI.message(message);\n\t}\n}\n","import rowsByPosition from './rows-by-position';\n\nexport default function autoalign(page) {\n\tconst rows = rowsByPosition(page);\n\n\tconst rowNames = Object.keys(rows).sort(\n\t\t(a, b) => parseInt(a, 10) - parseInt(b, 10)\n\t);\n\n\tlet y = 0;\n\tfor (const rowName of rowNames) {\n\t\tconst row = rows[rowName];\n\t\tlet x = 0;\n\t\tlet nextYOffset = 1000;\n\t\tlet sequenceNumber = 0;\n\n\t\tfor (const artboard of row) {\n\t\t\t// Make sure they're in the right order, so the list on the left is sorted\n\t\t\tconst parent = artboard.parentGroup();\n\t\t\tartboard.removeFromParent();\n\t\t\tparent.insertLayer_atIndex(artboard, 0);\n\n\t\t\t// Update name\n\t\t\tconst artboardNumber = parseInt(rowName, 10) + sequenceNumber;\n\t\t\tartboard.name = artboardNumber.toString();\n\n\t\t\t// Update artboard's position\n\t\t\t// artboard.frame().{x,y}() isn't always relatively to (0,0), and using\n\t\t\t// absoluteRect.ruler{X,Y} seems to solve this\n\t\t\tartboard.absoluteRect().rulerX = x;\n\t\t\tartboard.absoluteRect().rulerY = y;\n\n\t\t\t// Use the height of the largest artboard on this row to determine the\n\t\t\t// y-offset of the next row (plus a small buffer for labels)\n\t\t\tconst height = artboard.frame().height() + 100;\n\t\t\tif (height > nextYOffset) {\n\t\t\t\t// Snap to a 500 unit grid\n\t\t\t\tnextYOffset = height + (500 - (height % 500));\n\t\t\t}\n\n\t\t\tx += 500;\n\t\t\tsequenceNumber++;\n\t\t}\n\t\ty += nextYOffset;\n\t}\n}\n","import rowsByPosition from './rows-by-position';\n\nconst getArtboards = rows => Object.keys(rows).map(rowName => rows[rowName]);\nconst filterArtboards = (artboardToFilter, invalidArtboards) =>\n\tartboardToFilter.filter(artboard => !invalidArtboards.find(invalid => invalid.name() === artboard.name()));\n\nexport default function checkArtoboards(pageIt, pageEn) {\n\tconst rowsIt = rowsByPosition(pageIt);\n\tconst rowsEn = rowsByPosition(pageEn);\n\n\tconst artboardsIt = getArtboards(rowsIt);\n\tconst artboardsEn = getArtboards(rowsEn);\n\n\tif (artboardsEn.length !== artboardsIt.length) {\n\t\tconst isEnInvalid = artboardsEn.length < artboardsIt.length;\n\t\tconst innerArtboardsIt = artboardsIt.reduce((acc, artboardGroup) => acc.concat(...artboardGroup), []);\n\t\tconst innerArtboardsEn = artboardsEn.reduce((acc, artboardGroup) => acc.concat(...artboardGroup), []);\n\t\t// If ENG is invalid filter on IT to find what's missing\n\t\tconst missingArtboards = isEnInvalid ?\n\t\t\tfilterArtboards(innerArtboardsIt, innerArtboardsEn) :\n\t\t\tfilterArtboards(innerArtboardsEn, innerArtboardsIt);\n\t\tconst missingArtboardsNames = missingArtboards.map(artboard => artboard.name());\n\n\t\tconst invalidPage = isEnInvalid ? 'ENG' : 'IT';\n\n\t\treturn {message: `⚠️ pages are missing in \"${invalidPage}\": ${missingArtboardsNames}`};\n\t}\n}\n","import rowsByPosition from './rows-by-position';\n\nconst placeholder = '{{artboardName}}';\n\nexport default function autoalign(page) {\n\tconst rows = rowsByPosition(page);\n\tconst rowNames = Object.keys(rows);\n\n\tfor (const rowName of rowNames) {\n\t\tconst row = rows[rowName];\n\n\t\tfor (const artboard of row) {\n\t\t\tconst layers = artboard.layers();\n\t\t\tlayers.forEach(item => {\n\t\t\t\tif (String(item.name()) === placeholder) {\n\t\t\t\t\titem.setStringValue(artboard.name());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n","\nexport default function rowsByPosition(page) {\n\tconst artboards = page.artboards();\n\n\t// Find the row covers\n\tconst rowCovers = artboards.reduce((acc, artboard) => {\n\t\tconst number = parseInt(artboard.name(), 10);\n\t\treturn number % 100 === 0 ? acc.concat(artboard) : acc;\n\t}, []);\n\n\t// Sort the existing covers\n\trowCovers.sort((a, b) => a.frame().y() - b.frame().y());\n\n\t// Build up the rows, starting with their covers\n\tconst rows = rowCovers.reduce((acc, row, index) => {\n\t\tconst rowName = ((index + 1) * 100).toString();\n\t\tacc[rowName] = [row];\n\t\treturn acc;\n\t}, {});\n\n\tconst yPositions = Object.entries(rows).map(([name, row]) => [\n\t\tname,\n\t\trow[0].frame().y()\n\t]);\n\n\t// Add other artboards into the rows\n\tfor (let i = 0; i < artboards.length; i++) {\n\t\t// Skip row covers, obvs...\n\t\tif (rowCovers.includes(artboards[i])) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst yPos = artboards[i].frame().y();\n\n\t\tlet closestRow;\n\t\tlet smallestDist = Infinity;\n\t\tfor (const [rowName, rowYPos] of yPositions) {\n\t\t\tconst yDist = Math.abs(yPos - rowYPos);\n\t\t\tif (yDist < smallestDist) {\n\t\t\t\tclosestRow = rowName;\n\t\t\t\tsmallestDist = yDist;\n\t\t\t}\n\t\t}\n\n\t\trows[closestRow].push(artboards[i]);\n\t}\n\n\t// Sort rows by board x position\n\tObject.values(rows).forEach(row =>\n\t\trow.sort((a, b) => a.frame().x() - b.frame().x())\n\t);\n\n\treturn rows;\n}\n","export function getPages(context) {\n\tconst pages = context.document.pages();\n\tconst itPage = pages.find(page => String(page.name).includes('ITA'));\n\tconst enPage = pages.find(page => String(page.name).includes('ENG'));\n\treturn {itPage, enPage};\n}\n","module.exports = require(\"sketch/ui\");"],"sourceRoot":""}